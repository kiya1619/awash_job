{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    {% if messages %}
  <div class="mt-3">
    {% for message in messages %}
      {% if message.tags == "error" %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
      {% elif message.tags == "warning" %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
      {% elif message.tags == "success" %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
      {% else %}
        <div class="alert alert-info alert-dismissible fade show" role="alert">
      {% endif %}
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
  </div>
{% endif %}
  <h2 class="mb-4">Add Promotion</h2>

  <form method="post">
    {% csrf_token %}

    <!-- Employee Selection -->
    <div class="mb-3">
      <label for="employee" class="form-label">Select Employee</label>
      <select id="employee" name="employee" class="form-select" required>
        <option value="">-- Choose Employee --</option>
        {% for emp in employees %}
          <option value="{{ emp.id }}">{{ emp.full_name }} ({{ emp.employee_id }})</option>
        {% endfor %}
      </select>
    </div>

    <!-- Position/Grade Selection -->
    <div class="mb-3">
      <label for="new_position" class="form-label">New Position / Grade</label>
      <select id="new_position" name="new_position" class="form-select" required>
        <option value="">-- Choose Position --</option>
        {% for pos in positions %}
          <option value="{{ pos }}">{{ pos }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Promotion Date -->
    <div class="mb-3">
      <label for="promoted_at" class="form-label">Promotion Date</label>
      <input type="date" id="promoted_at" name="promoted_at" class="form-control" required>
    </div>

    <!-- Remarks -->
    <div class="mb-3">
      <label for="remarks" class="form-label">Remarks (optional)</label>
      <textarea id="remarks" name="remarks" class="form-control" rows="3"></textarea>
    </div>

    <button type="submit" class="btn btn-success">Save Promotion</button>
    <a href="{% url 'promotion_list' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>
{% endblock %}
